!function(e){var t={};function s(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=e,s.c=t,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},s.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);var n=class{constructor(){this.eventMap=new Map}addListener(e,t){this.eventMap.has(e)||this.eventMap.set(e,[]),this.eventMap.get(e).push(t)}removeListener(e,t){if(!this.eventMap.has(e))return;const s=this.eventMap.get(e);s.splice(s.indexOf(t),1)}clearListeners(e){this.eventMap.has(e)&&(this.eventMap.get(e).length=0)}countListeners(e){return this.eventMap.has(e)?this.eventMap.get(e).length:0}getListeners(e){return this.eventMap.get(e)}emit(e){if(!this.eventMap.has(e))return;const t=Array.prototype.splice.call(arguments,1),s=this.eventMap.get(e),n=s.length;let o=0;for(;o<n;)s[o].apply(null,t)?(s.splice(o,1),--o):++o;this.onEventProcessed(e,t)}on(e,t){this.addListener(e,t)}once(e,t){this.addListener(e,()=>(t(),!0))}onEventProcessed(e,t){}};var o=class{constructor(e,t){this.x=0,this.y=0,this.scrollX=0,this.scrollY=0,this.events=new n,this._canvas=e,this._element=t,this._mouseup=this.onMouseUp.bind(this),this._mousedown=this.onMouseDown.bind(this),this._mouseclick=this.onMouseClick.bind(this),this._mousemove=this.onMouseMove.bind(this),this._wheel=this.onMouseWheel.bind(this),this._touchstart=this.onTouchStart.bind(this),this._touchmove=this.onTouchMove.bind(this),this._touchstop=this.onTouchStop.bind(this),this._element.addEventListener("mouseup",this._mouseup),this._element.addEventListener("mousedown",this._mousedown),this._element.addEventListener("click",this._mouseclick),this._element.addEventListener("mousemove",this._mousemove),this._element.addEventListener("wheel",this._wheel),this._element.addEventListener("touchstart",this._touchstart)}destroy(){this._element.removeEventListener("mouseup",this._mouseup),this._element.removeEventListener("mousedown",this._mousedown),this._element.removeEventListener("click",this._mouseclick),this._element.removeEventListener("mousemove",this._mousemove),this._element.removeEventListener("wheel",this._wheel),this._element.removeEventListener("touchstart",this._touchstart)}onMouseUp(e){this.onMouseMove(e),this.events.emit("mouseup",this)}onMouseDown(e){this.onMouseMove(e),this.events.emit("mousedown",this)}onMouseClick(e){this.onMouseMove(e),this.events.emit("mouseclick",this)}onMouseWheel(e){this.scrollX+=e.deltaX,this.scrollY+=e.deltaY,this.events.emit("wheel",this,e.deltaX,e.deltaY)}onMouseMove(e){const t=this._canvas.getBoundingClientRect();this.x=e.clientX-t.left,this.y=e.clientY-t.top}onTouchStart(e){const t=e.touches[0].target;t.addEventListener("touchmove",this._touchmove),t.addEventListener("touchend",this._touchstop),t.addEventListener("touchcancel",this._touchstop)}onTouchStop(e){const t=e.touches[0].target;t.removeEventListener("touchmove",this._touchmove),t.removeEventListener("touchend",this._touchstop),t.removeEventListener("touchcancel",this._touchstop)}onTouchMove(e){this.onMouseMove(e.touches[0])}};const i=16,h=12,c=document.getElementById("content"),r=c.getContext("2d"),a=new o(c,document),u=new class{constructor(){this.states=[],this.nextAvailableStateID=0}createNewState(){const e={x:Math.random()*c.width,y:Math.random()*c.height,id:this.nextAvailableStateID++,accept:!1};return this.states.push(e),e}toggleAcceptState(e){e.accept=!e.accept}makeInitialState(e){this.states.splice(this.states.indexOf(e),1),this.states.unshift(e)}getStateByPosition(e,t){for(const s of this.states){const n=e-s.x,o=t-s.y;if(n*n+o*o<i*i)return s}}onUpdate(){}onRender(){if(this.states.length>0){const e=this.states[0],t=e.x,s=e.y;r.beginPath(),r.moveTo(t-i,s),r.lineTo(t-2*i,s-i),r.lineTo(t-2*i,s+i),r.closePath(),r.stroke()}for(const e of this.states){const t=e.x,s=e.y;r.beginPath(),r.arc(t,s,i,0,2*Math.PI),r.stroke(),e.accept&&(r.beginPath(),r.arc(t,s,h,0,2*Math.PI),r.stroke())}}};function l(e){c.width=window.innerWidth,c.height=window.innerHeight}a.events.on("mouseclick",function(e){const t=u.getStateByPosition(e.x,e.y);null!==t&&u.toggleAcceptState(t)}),document.getElementById("newstate").addEventListener("click",function(e){u.createNewState()}),window.addEventListener("load",l),window.addEventListener("resize",l),window.requestAnimationFrame(function e(t){r.clearRect(0,0,c.width,c.height);u.onRender();window.requestAnimationFrame(e)})}]);