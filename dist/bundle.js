!function(e){var t=window.webpackHotUpdate;window.webpackHotUpdate=function(e,n){!function(e,t){if(!m[e]||!E[e])return;for(var n in E[e]=!1,t)Object.prototype.hasOwnProperty.call(t,n)&&(v[n]=t[n]);0==--p&&0===g&&T()}(e,n),t&&t(e,n)};var n,r=!0,i="a92e6fc3ec3d9cc07815",o=1e4,s={},a=[],l=[];function u(e){var t=D[e];if(!t)return x;var r=function(r){return t.hot.active?(D[r]?-1===D[r].parents.indexOf(e)&&D[r].parents.push(e):(a=[e],n=r),-1===t.children.indexOf(r)&&t.children.push(r)):(console.warn("[HMR] unexpected require("+r+") from disposed module "+e),a=[]),x(r)},i=function(e){return{configurable:!0,enumerable:!0,get:function(){return x[e]},set:function(t){x[e]=t}}};for(var o in x)Object.prototype.hasOwnProperty.call(x,o)&&"e"!==o&&"t"!==o&&Object.defineProperty(r,o,i(o));return r.e=function(e){return"ready"===c&&f("prepare"),g++,x.e(e).then(t,function(e){throw t(),e});function t(){g--,"prepare"===c&&(_[e]||O(e),0===g&&0===p&&T())}},r.t=function(e,t){return 1&t&&(e=r(e)),x.t(e,-2&t)},r}var h=[],c="idle";function f(e){c=e;for(var t=0;t<h.length;t++)h[t].call(null,e)}var d,v,y,p=0,g=0,_={},E={},m={};function S(e){return+e+""===e?+e:e}function b(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return r=e,f("check"),function(e){return e=e||1e4,new Promise(function(t,n){if("undefined"==typeof XMLHttpRequest)return n(new Error("No browser support"));try{var r=new XMLHttpRequest,o=x.p+""+i+".hot-update.json";r.open("GET",o,!0),r.timeout=e,r.send(null)}catch(e){return n(e)}r.onreadystatechange=function(){if(4===r.readyState)if(0===r.status)n(new Error("Manifest request to "+o+" timed out."));else if(404===r.status)t();else if(200!==r.status&&304!==r.status)n(new Error("Manifest request to "+o+" failed."));else{try{var e=JSON.parse(r.responseText)}catch(e){return void n(e)}t(e)}}})}(o).then(function(e){if(!e)return f("idle"),null;E={},_={},m=e.c,y=e.h,f("prepare");var t=new Promise(function(e,t){d={resolve:e,reject:t}});v={};return O(0),"prepare"===c&&0===g&&0===p&&T(),t})}function O(e){m[e]?(E[e]=!0,p++,function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("script");n.charset="utf-8",n.src=x.p+""+e+"."+i+".hot-update.js",t.appendChild(n)}(e)):_[e]=!0}function T(){f("ready");var e=d;if(d=null,e)if(r)Promise.resolve().then(function(){return w(r)}).then(function(t){e.resolve(t)},function(t){e.reject(t)});else{var t=[];for(var n in v)Object.prototype.hasOwnProperty.call(v,n)&&t.push(S(n));e.resolve(t)}}function w(t){if("ready"!==c)throw new Error("apply() is only allowed in ready status");var n,r,o,l,u;function h(e){for(var t=[e],n={},r=t.slice().map(function(e){return{chain:[e],id:e}});r.length>0;){var i=r.pop(),o=i.id,s=i.chain;if((l=D[o])&&!l.hot._selfAccepted){if(l.hot._selfDeclined)return{type:"self-declined",chain:s,moduleId:o};if(l.hot._main)return{type:"unaccepted",chain:s,moduleId:o};for(var a=0;a<l.parents.length;a++){var u=l.parents[a],h=D[u];if(h){if(h.hot._declinedDependencies[o])return{type:"declined",chain:s.concat([u]),moduleId:o,parentId:u};-1===t.indexOf(u)&&(h.hot._acceptedDependencies[o]?(n[u]||(n[u]=[]),d(n[u],[o])):(delete n[u],t.push(u),r.push({chain:s.concat([u]),id:u})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}t=t||{};var p={},g=[],_={},E=function(){console.warn("[HMR] unexpected require("+O.moduleId+") to disposed module")};for(var b in v)if(Object.prototype.hasOwnProperty.call(v,b)){var O;u=S(b);var T=!1,w=!1,A=!1,R="";switch((O=v[b]?h(u):{type:"disposed",moduleId:b}).chain&&(R="\nUpdate propagation: "+O.chain.join(" -> ")),O.type){case"self-declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(T=new Error("Aborted because of self decline: "+O.moduleId+R));break;case"declined":t.onDeclined&&t.onDeclined(O),t.ignoreDeclined||(T=new Error("Aborted because of declined dependency: "+O.moduleId+" in "+O.parentId+R));break;case"unaccepted":t.onUnaccepted&&t.onUnaccepted(O),t.ignoreUnaccepted||(T=new Error("Aborted because "+u+" is not accepted"+R));break;case"accepted":t.onAccepted&&t.onAccepted(O),w=!0;break;case"disposed":t.onDisposed&&t.onDisposed(O),A=!0;break;default:throw new Error("Unexception type "+O.type)}if(T)return f("abort"),Promise.reject(T);if(w)for(u in _[u]=v[u],d(g,O.outdatedModules),O.outdatedDependencies)Object.prototype.hasOwnProperty.call(O.outdatedDependencies,u)&&(p[u]||(p[u]=[]),d(p[u],O.outdatedDependencies[u]));A&&(d(g,[O.moduleId]),_[u]=E)}var I,k=[];for(r=0;r<g.length;r++)u=g[r],D[u]&&D[u].hot._selfAccepted&&k.push({module:u,errorHandler:D[u].hot._selfAccepted});f("dispose"),Object.keys(m).forEach(function(e){!1===m[e]&&function(e){delete installedChunks[e]}(e)});for(var L,P,M=g.slice();M.length>0;)if(u=M.pop(),l=D[u]){var N={},C=l.hot._disposeHandlers;for(o=0;o<C.length;o++)(n=C[o])(N);for(s[u]=N,l.hot.active=!1,delete D[u],delete p[u],o=0;o<l.children.length;o++){var H=D[l.children[o]];H&&((I=H.parents.indexOf(u))>=0&&H.parents.splice(I,1))}}for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=D[u]))for(P=p[u],o=0;o<P.length;o++)L=P[o],(I=l.children.indexOf(L))>=0&&l.children.splice(I,1);for(u in f("apply"),i=y,_)Object.prototype.hasOwnProperty.call(_,u)&&(e[u]=_[u]);var j=null;for(u in p)if(Object.prototype.hasOwnProperty.call(p,u)&&(l=D[u])){P=p[u];var U=[];for(r=0;r<P.length;r++)if(L=P[r],n=l.hot._acceptedDependencies[L]){if(-1!==U.indexOf(n))continue;U.push(n)}for(r=0;r<U.length;r++){n=U[r];try{n(P)}catch(e){t.onErrored&&t.onErrored({type:"accept-errored",moduleId:u,dependencyId:P[r],error:e}),t.ignoreErrored||j||(j=e)}}}for(r=0;r<k.length;r++){var B=k[r];u=B.module,a=[u];try{x(u)}catch(e){if("function"==typeof B.errorHandler)try{B.errorHandler(e)}catch(n){t.onErrored&&t.onErrored({type:"self-accept-error-handler-errored",moduleId:u,error:n,originalError:e}),t.ignoreErrored||j||(j=n),j||(j=e)}else t.onErrored&&t.onErrored({type:"self-accept-errored",moduleId:u,error:e}),t.ignoreErrored||j||(j=e)}}return j?(f("fail"),Promise.reject(j)):(f("idle"),new Promise(function(e){e(g)}))}var D={};function x(t){if(D[t])return D[t].exports;var r=D[t]={i:t,l:!1,exports:{},hot:function(e){var t={_acceptedDependencies:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_disposeHandlers:[],_main:n!==e,active:!0,accept:function(e,n){if(void 0===e)t._selfAccepted=!0;else if("function"==typeof e)t._selfAccepted=e;else if("object"==typeof e)for(var r=0;r<e.length;r++)t._acceptedDependencies[e[r]]=n||function(){};else t._acceptedDependencies[e]=n||function(){}},decline:function(e){if(void 0===e)t._selfDeclined=!0;else if("object"==typeof e)for(var n=0;n<e.length;n++)t._declinedDependencies[e[n]]=!0;else t._declinedDependencies[e]=!0},dispose:function(e){t._disposeHandlers.push(e)},addDisposeHandler:function(e){t._disposeHandlers.push(e)},removeDisposeHandler:function(e){var n=t._disposeHandlers.indexOf(e);n>=0&&t._disposeHandlers.splice(n,1)},check:b,apply:w,status:function(e){if(!e)return c;h.push(e)},addStatusHandler:function(e){h.push(e)},removeStatusHandler:function(e){var t=h.indexOf(e);t>=0&&h.splice(t,1)},data:s[e]};return n=void 0,t}(t),parents:(l=a,a=[],l),children:[]};return e[t].call(r.exports,r,r.exports,u(t)),r.l=!0,r.exports}x.m=e,x.c=D,x.d=function(e,t,n){x.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},x.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},x.t=function(e,t){if(1&t&&(e=x(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(x.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)x.d(n,r,function(t){return e[t]}.bind(null,r));return n},x.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return x.d(t,"a",t),t},x.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},x.p="/dist/",x.h=function(){return i},u(18)(x.s=18)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.SUBMIT_KEY=13,t.CLEAR_KEY=27,t.STR_TRANSITION_DEFAULT_LABEL="0",t.STR_TRANSITION_PROXY_LABEL="#",t.STR_STATE_LABEL="q",t.PI2=2*Math.PI,t.HALF_PI=Math.PI/2,t.FOURTH_PI=Math.PI/4,t.SIXTH_PI=Math.PI/6;var r=t.NODE_RADIUS=16,i=(t.NODE_RADIUS_SQU=r*r,t.NODE_DIAMETER=2*r,t.NODE_RADIUS_INNER=12,t.EDGE_RADIUS=12),o=(t.EDGE_RADIUS_SQU=i*i,t.ARROW_WIDTH=10,t.PLACEHOLDER_LENGTH=3*r,t.ENDPOINT_RADIUS=6),s=(t.ENDPOINT_RADIUS_SQU=o*o,t.HOVER_RADIUS_OFFSET=4,t.CURSOR_RADIUS=4),a=(t.CURSOR_RADIUS_SQU=s*s,t.SELF_LOOP_HEIGHT=32,t.DOUBLE_TAP_TICKS=20,t.SPAWN_RADIUS=64,t.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE=!0,t.PADDING_RADIUS_SQU=2304,t.STATE_BASE_COLOR="#EDEBA6"),l=t.STATE_LINE_COLOR="black",u=t.STATE_TEXT_COLOR="black",h=t.TRANSITION_COLOR="black",c=t.TRANSITION_TEXT_COLOR="black",f=(t.GRAPH_INFO_COLOR="lightgray",t.NODE_FONT="12px Arial",t.NODE_TEXT_ALIGN="center",t.NODE_STROKE_STYLE=l,t.NODE_FILL_STYLE=a,t.NODE_TEXT_FILL_STYLE=u,t.EDGE_FONT="12px Arial",t.EDGE_TEXT_ALIGN="center",t.EDGE_STROKE_STYLE=h,t.EDGE_TEXT_STROKE_STYLE=c,t.HOVER_STROKE_STYLE="rgba(0,0,0,0.6)",t.HOVER_LINE_WIDTH=2,t.HOVER_LINE_DASH=[6,4],t.HOVER_ANGLE_SPEED=.01,t.SELECTION_BOX_SHADOW_COLOR="black",t.SELECTION_BOX_SHADOW_SIZE=5,t.SELECTION_BOX_SHADOW_OFFSETX=2,t.SELECTION_BOX_SHADOW_OFFSETY=2,t.SELECTION_BOX_FILL_STYLE="rgba(0, 0, 0, 0.1)",t.SELECTION_BOX_STROKE_STYLE="black",t.TRASH_AREA_WIDTH=64,t.TRASH_AREA_HEIGHT=64);t.TRASH_AREA_POSX=5,t.TRASH_AREA_POSY=f,t.TRASH_AREA_SHADOW_COLOR="red",t.TRASH_AREA_SHADOW_SIZE=5,t.TRASH_AREA_SHADOW_OFFSETX=2,t.TRASH_AREA_SHADOW_OFFSETY=2,t.TRASH_AREA_FILL_STYLE="rgba(255, 0, 0, 0.2)",t.TRASH_AREA_STROKE_STYLE="red",t.EXPORT_FILE_NAME="flap-machine.png"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=t}return r(e,[{key:"onSingleTap",value:function(e,t,n,r,i){return!1}},{key:"onDoubleTap",value:function(e,t,n,r,i){return!1}},{key:"onStartDragging",value:function(e,t,n,r,i){return!1}},{key:"onDragging",value:function(e,t,n,r,i){return!1}},{key:"onStopDragging",value:function(e,t,n,r,i){return!1}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Edge=t.Node=t.NodalGraph=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(3)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=t.NodalGraph=function(){function e(t){s(this,e),this.nodes=[],this.edges=[],this.viewport=t,this._offsetX=0,this._offsetY=0,this.nextOffsetX=0,this.nextOffsetY=0}return r(e,[{key:"createNewNode",value:function(e,t,n){var r=new l(this,e,t,n);return 0==this.nodes.length&&this.emit("newInitial",r,null),this.nodes.push(r),this.emit("nodeCreate",r),r}},{key:"destroyNode",value:function(e){for(var t=null,n=this.edges.length-1;n>=0;--n)(t=this.edges[n]).from==e?(this.edges.splice(n,1),this.emit("edgeDestroy",t)):t.to==e&&t.makePlaceholder();var r=this.nodes.indexOf(e);this.nodes.splice(r,1),0==r&&this.emit("newInitial",this.getInitialState(),e),this.emit("nodeDestroy",e)}},{key:"createNewEdge",value:function(e,t,n){var r=new u(this,e,t,n);return r.isSelfLoop()&&(r.y=e.y-o.SELF_LOOP_HEIGHT),this.edges.push(r),this.emit("edgeCreate",r),r}},{key:"destroyEdge",value:function(e){this.edges.splice(this.edges.indexOf(e),1),this.emit("edgeDestroy",e)}},{key:"clear",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,i=this.nodes[Symbol.iterator]();!(e=(r=i.next()).done);e=!0){var o=r.value;this.emit("nodeDestroy",o)}}catch(e){t=!0,n=e}finally{try{!e&&i.return&&i.return()}finally{if(t)throw n}}this.nodes.length=0;var s=!0,a=!1,l=void 0;try{for(var u,h=this.edges[Symbol.iterator]();!(s=(u=h.next()).done);s=!0){var c=u.value;this.emit("edgeDestroy",c)}}catch(e){a=!0,l=e}finally{try{!s&&h.return&&h.return()}finally{if(a)throw l}}this.edges.length=0}},{key:"update",value:function(e){this._offsetX=h(this._offsetX,this.nextOffsetX,e),this._offsetY=h(this._offsetY,this.nextOffsetY,e);var t=!0,n=!1,r=void 0;try{for(var i,o=this.nodes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){i.value.update(e)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}}},{key:"setInitialState",value:function(e){if(!(this.nodes.length<=1)){this.nodes.splice(this.nodes.indexOf(e),1);var t=this.nodes[0];this.nodes.unshift(e),this.emit("newInitial",e,t)}}},{key:"toggleAcceptState",value:function(e){e.accept=!e.accept}},{key:"getInitialState",value:function(){return this.nodes.length>0?this.nodes[0]:null}},{key:"centerX",get:function(){return this.viewport.width/2+this._offsetX}},{key:"centerY",get:function(){return this.viewport.height/2+this._offsetY}},{key:"offsetX",get:function(){return this._offsetX},set:function(e){this.nextOffsetX=e}},{key:"offsetY",get:function(){return this._offsetY},set:function(e){this.nextOffsetY=e}}]),e}();Object.assign(a.prototype,i.default);var l=t.Node=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"q";s(this,e),this.graph=t,this._x=n,this._y=r,this.nextX=n,this.nextY=r,this._label=i,this._accept=!1}return r(e,[{key:"update",value:function(e){this._x=h(this._x,this.nextX,e),this._y=h(this._y,this.nextY,e)}},{key:"x",get:function(){return this._x+this.graph.centerX},set:function(e){this.nextX=e}},{key:"y",get:function(){return this._y+this.graph.centerY},set:function(e){this.nextY=e}},{key:"label",get:function(){return this._label},set:function(e){var t=this._label;this._label=e,this.graph.emit("nodeLabel",this,this._label,t)}},{key:"accept",get:function(){return this._accept},set:function(e){var t=this._accept;this._accept=e,this.graph.emit("toggleAccept",this,this._accept,t)}}]),e}(),u=t.Edge=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#";s(this,e),this.graph=t,this._label=i,this._from=n,this._to=r,this.quad=null}return r(e,[{key:"getStartPoint",value:function(){if(null==this.quad){var e=this.from.x-this.to.x,t=this.from.y-this.to.y,n=-Math.atan2(t,e)-o.HALF_PI,r=o.NODE_RADIUS*Math.sin(n),i=o.NODE_RADIUS*Math.cos(n);return[this.from.x+r,this.from.y+i]}var s=this.getMidPoint(),a=s[0]+2*this.quad.x,l=s[1]+2*this.quad.y,u=this.from.x-a,h=this.from.y-l,c=-Math.atan2(h,u)-o.HALF_PI+(this.isSelfLoop()?o.FOURTH_PI:0),f=o.NODE_RADIUS*Math.sin(c),d=o.NODE_RADIUS*Math.cos(c),v=s;return v[0]=this.from.x+f,v[1]=this.from.y+d,v}},{key:"getCenterPoint",value:function(){var e=this.getMidPoint();return null!=this.quad&&(e[0]+=this.quad.x,e[1]+=this.quad.y),e}},{key:"getEndPoint",value:function(){if(null==this.quad){var e=this.isPlaceholder()?1:o.NODE_RADIUS,t=this.from.x-this.to.x,n=this.from.y-this.to.y,r=-Math.atan2(n,t)-o.HALF_PI,i=e*Math.sin(r),s=e*Math.cos(r);return[this.to.x-i,this.to.y-s]}var a=this.getMidPoint(),l=a[0]+2*this.quad.x,u=a[1]+2*this.quad.y,h=l-this.to.x,c=u-this.to.y,f=-Math.atan2(c,h)-o.HALF_PI+(this.isSelfLoop()?-o.FOURTH_PI:0),d=o.NODE_RADIUS*Math.sin(f),v=o.NODE_RADIUS*Math.cos(f),y=a;return y[0]=this.to.x-d,y[1]=this.to.y-v,y}},{key:"getMidPoint",value:function(){return[this.from.x+(this.to.x-this.from.x)/2,this.from.y+(this.to.y-this.from.y)/2]}},{key:"makePlaceholder",value:function(){this.to||(this.to={x:this.from.x+1,y:this.from.y});var e=this.from.x-this.to.x,t=this.from.y-this.to.y,n=-Math.atan2(e,t)-o.HALF_PI;this.to={from:this.from,dx:Math.cos(n),dy:Math.sin(n),get x(){return this.from.x+o.PLACEHOLDER_LENGTH*this.dx},get y(){return this.from.y+o.PLACEHOLDER_LENGTH*this.dy}},this.quad=null}},{key:"isSelfLoop",value:function(){return this.from==this.to}},{key:"isPlaceholder",value:function(){return!(this.to instanceof l)}},{key:"centerX",get:function(){return this.from.x+(this.to.x-this.from.x)/2}},{key:"centerY",get:function(){return this.from.y+(this.to.y-this.from.y)/2}},{key:"x",get:function(){var e=this.centerX;return null!=this.quad?this.quad.x+e:e},set:function(e){null==this.quad&&(this.quad={x:0,y:0}),this.quad.x=e-this.centerX,Math.abs(this.quad.x)<8&&(this.quad.x=0),0==this.quad.x&&0==this.quad.y&&(this.quad=null)}},{key:"y",get:function(){var e=this.centerY;return null!=this.quad?this.quad.y+e:e},set:function(e){null==this.quad&&(this.quad={x:0,y:0}),this.quad.y=e-this.centerY,Math.abs(this.quad.y)<8&&(this.quad.y=0),0==this.quad.x&&0==this.quad.y&&(this.quad=null)}},{key:"label",get:function(){return this._label},set:function(e){var t=this._label;this._label=e,this.graph.emit("edgeLabel",this,this._label,t)}},{key:"from",get:function(){return this._from}},{key:"to",get:function(){return this._to},set:function(e){var t=this._to;this._to=e,this.graph.emit("edgeDestination",this,this._to,t)}}]),e}();function h(e,t,n){return e*(1-n)+t*n}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={__events:new Map,addListener:function(e,t){this.__events.has(e)||this.__events.set(e,[]),this.__events.get(e).push(t)},removeListener:function(e,t){if(this.__events.has(e)){var n=this.__events.get(e);n.splice(n.indexOf(t),1)}},clearListeners:function(e){this.__events.has(e)&&(this.__events.get(e).length=0)},countListeners:function(e){return this.__events.has(e)?this.__events.get(e).length:0},getListeners:function(e){return this.__events.get(e)},emit:function(e){if(this.__events.has(e)){for(var t=Array.prototype.splice.call(arguments,1),n=this.__events.get(e),r=n.length,i=0;i<r;){n[i].apply(null,t)?(n.splice(i,1),--i):++i}this.onEventProcessed(e,t)}},on:function(e,t){this.addListener(e,t)},once:function(e,t){this.addListener(e,function(){return t(),!0})},onEventProcessed:function(e,t){}};t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t,n,r){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,n);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(r):void 0},i=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(2),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=0,f=function(){function e(t,n,r){var i=this;h(this,e),this.viewport=t,this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d"),this.graph=n,this.controller=r,this.nodeElements=new Map,this.edgeElements=new Map,this.selectElements=new Map,this.initialMarkerElement=new p(this.graph),this.initialMarkerElement.onCreate(this.ctx,this.canvas),this.selectionBoxElement=new g(this.controller.cursors.selectCursor.selectBox),this.selectionBoxElement.onCreate(this.ctx,this.canvas),this.hoverElement=new _(this.controller),this.hoverElement.onCreate(this.ctx,this.canvas),this.trashAreaElement=new m(this.controller.cursors.trashArea),this.trashAreaElement.onCreate(this.ctx,this.canvas),this.graph.on("nodeCreate",function(e){var t=new v(e);t.onCreate(i.ctx,i.canvas),i.nodeElements.set(e,t)}),this.graph.on("nodeDestroy",function(e){i.nodeElements.get(e).onDestroy(i.ctx,i.canvas),i.nodeElements.delete(e)}),this.graph.on("edgeCreate",function(e){var t=new y(e);t.onCreate(i.ctx,i.canvas),i.edgeElements.set(e,t)}),this.graph.on("edgeDestroy",function(e){i.edgeElements.get(e).onDestroy(i.ctx,i.canvas),i.edgeElements.delete(e)})}return o(e,[{key:"render",value:function(){var e=this.ctx;e.clearRect(0,0,this.canvas.width,this.canvas.height),e.save(),e.font=a.EDGE_FONT,e.textAlign=a.EDGE_TEXT_ALIGN,e.strokeStyle=a.EDGE_STROKE_STYLE;var t=!0,n=!1,r=void 0;try{for(var o,s=this.edgeElements[Symbol.iterator]();!(t=(o=s.next()).done);t=!0){var l=o.value,u=i(l,2);u[0];u[1].onRender(e)}}catch(e){n=!0,r=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}e.restore(),e.save(),this.initialMarkerElement.onRender(e),e.restore(),e.save(),e.font=a.NODE_FONT,e.textAlign=a.NODE_TEXT_ALIGN,e.strokeStyle=a.NODE_STROKE_STYLE,e.fillStyle=a.NODE_FILL_STYLE;var h=!0,f=!1,d=void 0;try{for(var v,y=this.nodeElements[Symbol.iterator]();!(h=(v=y.next()).done);h=!0){var p=v.value,g=i(p,2);g[0];g[1].onRender(e)}}catch(e){f=!0,d=e}finally{try{!h&&y.return&&y.return()}finally{if(f)throw d}}if(e.restore(),e.save(),this.controller.cursors.selectCursor.hasSelection()){var _=this.controller.cursors.selectCursor.getSelection(this.controller.cursors.cursor),m=!0,S=!1,b=void 0;try{for(var O,T=_[Symbol.iterator]();!(m=(O=T.next()).done);m=!0){var w=O.value;this.selectElements.has(w)||this.selectElements.set(w,new E(w,"node"))}}catch(e){S=!0,b=e}finally{try{!m&&T.return&&T.return()}finally{if(S)throw b}}var D=[],x=!0,A=!1,R=void 0;try{for(var I,k=this.selectElements[Symbol.iterator]();!(x=(I=k.next()).done);x=!0){var L=I.value,P=i(L,2),M=P[0],N=P[1];_.includes(M)?N.onRender(e):D.push(M)}}catch(e){A=!0,R=e}finally{try{!x&&k.return&&k.return()}finally{if(A)throw R}}var C=!0,H=!1,j=void 0;try{for(var U,B=D[Symbol.iterator]();!(C=(U=B.next()).done);C=!0){var Y=U.value,X=this.selectElements.get(Y);X.onDestroy(this.ctx,this.canvas),this.selectElements.delete(X)}}catch(e){H=!0,j=e}finally{try{!C&&B.return&&B.return()}finally{if(H)throw j}}}e.restore(),e.save(),this.controller.cursors.selectCursor.isSelecting&&this.selectionBoxElement.onRender(e),this.hoverElement.onRender(e),e.restore(),e.save(),this.trashAreaElement.onRender(e),e.restore(),c=(c+a.HOVER_ANGLE_SPEED)%a.PI2}}]),e}(),d=function(){function e(){h(this,e)}return o(e,[{key:"onCreate",value:function(e,t){}},{key:"onDestroy",value:function(e,t){}},{key:"onRender",value:function(e){}}]),e}(),v=function(e){function t(e){h(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.node=e,n}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e);var n=this.node.x,i=this.node.y,o=this.node.label,s=this.node.accept;e.fillStyle=a.NODE_FILL_STYLE,e.beginPath(),e.arc(n,i,a.NODE_RADIUS,0,a.PI2),e.fill(),e.stroke(),s&&(e.beginPath(),e.arc(n,i,a.NODE_RADIUS_INNER,0,a.PI2),e.stroke()),e.fillStyle=a.NODE_TEXT_FILL_STYLE,e.fillText(o,n,i+4)}}]),t}(),y=function(e){function t(e){h(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.edge=e,n}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e);this.edge.from,this.edge.to;var n,i,o=this.edge.x,l=this.edge.y,u=this.edge.getMidPoint(),h=u[0],c=u[1],f=this.edge.quad,d=this.edge.label,v=0,y=this.edge.getStartPoint(),p=this.edge.to instanceof s.Node?this.edge.getEndPoint():[this.edge.to.x,this.edge.to.y];if(n=p[0],i=p[1],e.beginPath(),e.moveTo(y[0],y[1]),null==f)v=Math.atan2(y[0]-p[0],y[1]-p[1])+Math.PI,e.lineTo(p[0],p[1]);else{var g=this.edge.getCenterPoint();g[0]+=f.x,g[1]+=f.y,v=Math.atan2(g[0]-p[0],g[1]-p[1])+Math.PI,e.quadraticCurveTo(g[0],g[1],p[0],p[1])}if(e.moveTo(n-a.ARROW_WIDTH*Math.sin(v-a.SIXTH_PI),i-a.ARROW_WIDTH*Math.cos(v-a.SIXTH_PI)),e.lineTo(n,i),e.lineTo(n-a.ARROW_WIDTH*Math.sin(v+a.SIXTH_PI),i-a.ARROW_WIDTH*Math.cos(v+a.SIXTH_PI)),e.stroke(),e.closePath(),d.length>0){var _=d.split(" "),E=0,m=!0,S=!1,b=void 0;try{for(var O,T=_[Symbol.iterator]();!(m=(O=T.next()).done);m=!0){var w=O.value,D=0,x=0,A=3*w.length,R=0;null==f?(D=h,x=c):(D=o,x=l+8*(R=Math.sign(f.y))),x+=E*(-R||1),e.clearRect(D-A-2,x-5,2*A+4,10),e.fillText(w,D,x+4),E-=12}}catch(e){S=!0,b=e}finally{try{!m&&T.return&&T.return()}finally{if(S)throw b}}}}}]),t}(),p=function(e){function t(e){h(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.graph=e,n}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e);var n=this.graph.getInitialState();if(n){var i=n.x,o=n.y;e.strokeStyle=a.EDGE_STROKE_STYLE,e.beginPath(),e.moveTo(i-a.NODE_RADIUS,o),e.lineTo(i-a.NODE_DIAMETER,o-a.NODE_RADIUS),e.lineTo(i-a.NODE_DIAMETER,o+a.NODE_RADIUS),e.closePath(),e.stroke()}}}]),t}(),g=function(e){function t(e){h(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.selectBox=e,n}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e);var n=this.selectBox.mx-this.selectBox.x,i=this.selectBox.my-this.selectBox.y;e.save(),e.shadowColor=a.SELECTION_BOX_SHADOW_COLOR,e.shadowBlur=a.SELECTION_BOX_SHADOW_SIZE,e.shadowOffsetX=a.SELECTION_BOX_SHADOW_OFFSETX,e.shadowOffsetY=a.SELECTION_BOX_SHADOW_OFFSETY,e.fillStyle=a.SELECTION_BOX_FILL_STYLE,e.strokeStyle=a.SELECTION_BOX_STROKE_STYLE,e.fillRect(this.selectBox.x,this.selectBox.y,n,i),e.strokeRect(this.selectBox.x,this.selectBox.y,n,i),e.restore()}}]),t}(),_=function(e){function t(e){h(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.controller=e,n}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e);var n=this.controller.cursors.hoverTarget,i=this.controller.cursors.hoverType;if(null!=n&&!this.controller.cursors.selectCursor.selectBox.targets.includes(n)){var o=0,s=0,l=a.CURSOR_RADIUS;switch(i){case"node":o=n.x,s=n.y,l=a.NODE_RADIUS;break;case"edge":o=n.x,s=n.y,l=a.EDGE_RADIUS;break;case"endpoint":var u=n.getEndPoint();o=u[0],s=u[1],l=a.ENDPOINT_RADIUS;break;default:o=o,s=s}e.save();var h=c;e.strokeStyle=a.HOVER_STROKE_STYLE,e.lineWidth=a.HOVER_LINE_WIDTH,e.beginPath(),e.setLineDash(a.HOVER_LINE_DASH),e.arc(o,s,l+a.HOVER_RADIUS_OFFSET,0+h,a.PI2+h),e.stroke(),e.restore(),c=(c+a.HOVER_ANGLE_SPEED)%a.PI2}}}]),t}(),E=function(e){function t(e,n){h(this,t);var r=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.target=e,r.type=n,r}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e);var n=this.target,i=this.type,o=0,s=0,l=a.CURSOR_RADIUS;switch(i){case"node":o=n.x,s=n.y,l=a.NODE_RADIUS;break;case"edge":o=n.x,s=n.y,l=a.EDGE_RADIUS;break;case"endpoint":var u=n.getEndPoint();o=u[0],s=u[1],l=a.ENDPOINT_RADIUS;break;default:o=o,s=s}e.save();var h=c;e.strokeStyle=a.HOVER_STROKE_STYLE,e.lineWidth=a.HOVER_LINE_WIDTH,e.beginPath(),e.setLineDash(a.HOVER_LINE_DASH),e.arc(o,s,l+a.HOVER_RADIUS_OFFSET,0+h,a.PI2+h),e.stroke(),e.restore()}}]),t}(),m=function(e){function t(e){h(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.trashArea=e,n}return u(t,d),o(t,[{key:"onRender",value:function(e){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRender",this).call(this,e),e.shadowColor=a.TRASH_AREA_SHADOW_COLOR,e.shadowBlur=a.TRASH_AREA_SHADOW_SIZE,e.shadowOffsetX=a.TRASH_AREA_SHADOW_OFFSETX,e.shadowOffsetY=a.TRASH_AREA_SHADOW_OFFSETY,e.fillStyle=a.TRASH_AREA_FILL_STYLE,e.strokeStyle=a.TRASH_AREA_STROKE_STYLE,e.fillRect(this.trashArea.x,this.trashArea.y,this.trashArea.width,this.trashArea.height),e.strokeRect(this.trashArea.x,this.trashArea.y,this.trashArea.width,this.trashArea.height)}}]),t}();t.default=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.transitions=t,this.startState=n,this.finalStates=r}return r(e,[{key:"transition",value:function(e,t){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=this.transitions[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value;l[0]==e&&l[1]==t&&n.push(l[2])}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}},{key:"solve",value:function(e){var t=[],n=[];t.push({state:this.startState,index:0});for(var r=[],i=null,o=null,s=[],a=0;t.length>0;){null!=(o=e.next().value)&&n.push(o);var l=!0,u=!1,h=void 0;try{for(var c,f=t[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value;if(i=d.state,null!=(o=d.index<n.length?n[d.index]:null)){a=d.index+1;var v=!0,y=!1,p=void 0;try{for(var g,_=this.transition(i,o)[Symbol.iterator]();!(v=(g=_.next()).done);v=!0){var E=g.value;s.push({state:E,index:a})}}catch(e){y=!0,p=e}finally{try{!v&&_.return&&_.return()}finally{if(y)throw p}}}else{if(this.finalStates.includes(i))return!0;r.push(i)}a=d.index;var m=!0,S=!1,b=void 0;try{for(var O,T=this.transition(i,"#")[Symbol.iterator]();!(m=(O=T.next()).done);m=!0){var w=O.value;if(!r.includes(w)){if(null==o&&this.finalStates.includes(w))return!0;s.push({state:w,index:a})}}}catch(e){S=!0,b=e}finally{try{!m&&T.return&&T.return()}finally{if(S)throw b}}}}catch(e){u=!0,h=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw h}}t.length=0,t.push.apply(t,s),s.length=0}return!1}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.transitions=t,this.startState=n,this.finalStates=r}return r(e,[{key:"transition",value:function(e,t){var n=!0,r=!1,i=void 0;try{for(var o,s=this.transitions[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var a=o.value;if(a[0]==e&&a[1]==t)return a[2]}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}return null}},{key:"solve",value:function(e){for(var t=this.startState,n=null;null!=(n=e.next().value);)t=this.transition(t,n);return this.finalStates.includes(t)}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=t,this.statesElement=document.getElementById("states"),this.symbolsElement=document.getElementById("symbols"),this.transitionsElement=document.getElementById("transitions"),this.startStateElement=document.getElementById("startState"),this.finalStatesElement=document.getElementById("finalStates"),this.states=[],this.symbols=[],this.graph.on("nodeCreate",this.onNode.bind(this)),this.graph.on("nodeDestroy",this.onNode.bind(this)),this.graph.on("nodeLabel",this.onNode.bind(this)),this.graph.on("edgeCreate",this.onEdge.bind(this)),this.graph.on("edgeDestroy",this.onEdge.bind(this)),this.graph.on("edgeLabel",this.onEdge.bind(this)),this.graph.on("edgeDestination",this.onEdgeDestination.bind(this)),this.graph.on("newInitial",this.onNewInitial.bind(this)),this.graph.on("toggleAccept",this.onToggleAccept.bind(this))}return r(e,[{key:"evaluateStates",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.graph.nodes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;s.label&&e.push(s.label)}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}e.sort(),this.statesElement.innerText=e.join(", ")}},{key:"evaluateSymbols",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.graph.edges[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.label){var a=s.label.split(" "),l=!0,u=!1,h=void 0;try{for(var c,f=a[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value;e.includes(d)||e.push(d)}}catch(e){u=!0,h=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw h}}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}e.sort(),this.symbolsElement.innerText=e.join(", ")}},{key:"evaluateTransitions",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.graph.edges[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;if(s.label){var a=s.label.split(" "),l=!0,u=!1,h=void 0;try{for(var c,f=a[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value,v=s.from?s.from.label:"undefined",y=s.to?s.to.label:"undefined";e.push("<li>("+v+", "+d+") &rarr; "+y)}}catch(e){u=!0,h=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw h}}}}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}e.sort(),this.transitionsElement.innerHTML=e.join(",</li>")}},{key:"evaluateStartState",value:function(){var e=this.graph.getInitialState();this.startStateElement.innerText=e?e.label:""}},{key:"evaluateFinalStates",value:function(){var e=[],t=!0,n=!1,r=void 0;try{for(var i,o=this.graph.nodes[Symbol.iterator]();!(t=(i=o.next()).done);t=!0){var s=i.value;s.label&&(s.accept&&e.push(s.label))}}catch(e){n=!0,r=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw r}}e.sort(),this.finalStatesElement.innerText=e.join(", ")}},{key:"onNode",value:function(e){this.graph.getInitialState()==e&&this.evaluateStartState(),e.accept&&this.evaluateFinalStates(),this.evaluateStates(),this.evaluateTransitions()}},{key:"onEdge",value:function(e){this.evaluateSymbols(),this.evaluateTransitions()}},{key:"onEdgeDestination",value:function(e,t,n){this.evaluateTransitions()}},{key:"onNewInitial",value:function(e){this.evaluateStartState()}},{key:"onToggleAccept",value:function(e){this.evaluateFinalStates()}},{key:"parse",value:function(){}}]),e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._simulatePhysics=!1}return r(e,[{key:"sort",value:function(){this._simulatePhysics=!0}},{key:"update",value:function(e,t){if(this._simulatePhysics){var n=!1,r=!0,i=!1,o=void 0;try{for(var s,a=t.nodes[Symbol.iterator]();!(r=(s=a.next()).done);r=!0){var l=s.value,u=!0,h=!1,c=void 0;try{for(var f,d=t.nodes[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var v=f.value;if(l!=v){var y=l.nextX-v.nextX,p=l.nextY-v.nextY;y*y+p*p<PADDING_RADIUS_SQU&&(l.nextX+=.5*y,l.nextY+=.5*p,n=!0)}}}catch(e){h=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}}}catch(e){i=!0,o=e}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}this._simulatePhysics=n}}}]),e}();t.default=new i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(8)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var s=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.viewport=t,this.graph=n,this.cursorController=r}return r(e,[{key:"load",value:function(){var e=this;document.getElementById("new_state").addEventListener("click",function(t){e.cursorController.createNewState()}),document.getElementById("clear_graph").addEventListener("click",function(t){e.graph.clear()}),document.getElementById("simulate_physics").addEventListener("click",function(e){i.default.sort()}),document.getElementById("export_image").addEventListener("click",function(t){(console.log(e.viewport),e.viewport)&&function(e,t){var n=document.createElement("a");n.download=t,n.href=e,document.body.appendChild(n),n.click(),document.body.removeChild(n)}(e.viewport.toDataURL("image/png"),o.EXPORT_FILE_NAME)})}},{key:"update",value:function(e){i.default.update(e,this.graph)}}]),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(1));var o=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.mainController=e,r.selectBox={x:0,y:0,mx:0,my:0,targets:[]},r.isSelecting=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"onStartDragging",value:function(e,t,n,r,i){return null==r&&(this.isSelecting=!0,this.selectBox.x=t,this.selectBox.y=n,this.selectBox.mx=t,this.selectBox.my=n,this.clearSelection(),!0)}},{key:"onDragging",value:function(e,t,n,r,i){return!!this.isSelecting&&(this.selectBox.mx=t,this.selectBox.my=n,this.getSelection(e),!0)}},{key:"onStopDragging",value:function(e,t,n,r,i){return!!this.isSelecting&&(this.selectBox.mx=t,this.selectBox.my=n,this.getSelection(e),this.isSelecting=!1,!0)}},{key:"getSelection",value:function(e){if(this.isSelecting){var t=Math.max(this.selectBox.mx,this.selectBox.x),n=Math.max(this.selectBox.my,this.selectBox.y),r=Math.min(this.selectBox.mx,this.selectBox.x),i=Math.min(this.selectBox.my,this.selectBox.y);this.clearSelection(),e.getNodesWithin(r,i,t,n,this.selectBox.targets)}return this.selectBox.targets}},{key:"hasSelection",value:function(){return this.selectBox.targets.length>0}},{key:"clearSelection",value:function(){this.selectBox.targets.length=0}}]),t}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.mainController=e,r.prevTarget={x:0,y:0},r.graphTarget={x:0,y:0},r.quadTarget={x:0,y:0},r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"onStartDragging",value:function(e,t,n,r,i){if(null!=r){if("edge"==i&&console.log(r.isPlaceholder()+", "+i),"edge"==i&&r.isPlaceholder())return this.mainController.stopMove(),!1;this.prevTarget.x=t,this.prevTarget.y=n,this.mainController.startMove(r,i)}else this.graphTarget.x=t,this.graphTarget.y=n,this.mainController.startMove(this.graphTarget,"graph");return!0}},{key:"onDragging",value:function(e,t,n,r,i){return null!=r&&(this.moveTarget(e,r,i,t,n),!0)}},{key:"onStopDragging",value:function(e,t,n,r,i){var s=!1;if(null!=r){if(s=this.moveTarget(e,r,i,t,n),"endpoint"==i)return s?r.label==o.STR_TRANSITION_PROXY_LABEL&&(r.label=o.STR_TRANSITION_DEFAULT_LABEL,this.mainController.openLabelEditor(r)):this.mainController.shouldDestroyPointlessEdges?this.graph.destroyEdge(r):this.mainController.isWithinTrash(t,n)?this.graph.destroyEdge(r):(r.makePlaceholder(),r.label==o.STR_TRANSITION_PROXY_LABEL&&(r.label=o.STR_TRANSITION_DEFAULT_LABEL,this.mainController.openLabelEditor(r))),!0;if("node"==i&&this.mainController.isWithinTrash(t,n)){if(this.mainController.selectCursor.hasSelection()){var a=!0,l=!1,u=void 0;try{for(var h,c=this.mainController.selectCursor.getSelection()[Symbol.iterator]();!(a=(h=c.next()).done);a=!0){var f=h.value;this.graph.destroyNode(f)}}catch(e){l=!0,u=e}finally{try{!a&&c.return&&c.return()}finally{if(l)throw u}}this.mainController.selectCursor.clearSelection()}else this.graph.destroyNode(r);return!0}}else s=this.moveTarget(e,this.graphTarget,"graph",t,n);return s}},{key:"moveTarget",value:function(e,t,n,r,i){if(null==t)throw new Error("Trying to resolve target mode '"+n+"' with missing target source");if("node"==n){if(this.mainController.selectCursor.hasSelection()){var s=r-this.prevTarget.x,a=i-this.prevTarget.y,l=!0,u=!1,h=void 0;try{for(var c,f=this.mainController.selectCursor.getSelection()[Symbol.iterator]();!(l=(c=f.next()).done);l=!0){var d=c.value;d.nextX+=s,d.nextY+=a}}catch(e){u=!0,h=e}finally{try{!l&&f.return&&f.return()}finally{if(u)throw h}}this.prevTarget.x=r,this.prevTarget.y=i}else t.x=r-this.graph.centerX,t.y=i-this.graph.centerY;return!0}if("edge"==n)return t.x=r,t.y=i,!0;if("endpoint"==n){var v=!0,y=e.getNodeAt(r,i);if(y?(t.to=y,v=!0):(t.to=e.mouse,v=!1),t.isSelfLoop()){var p=t.from.x-r,g=t.from.y-i,_=Math.atan2(g,p);t.x=t.from.x-Math.cos(_)*o.SELF_LOOP_HEIGHT,t.y=t.from.y-Math.sin(_)*o.SELF_LOOP_HEIGHT}else 0!=this.quadTarget.x||0!=this.quadTarget.y?(t.x=t.y=1,t.quad.x=this.quadTarget.x,t.quad.y=this.quadTarget.y):t.quad=null;return v}return"graph"==n&&(this.graph.offsetX=r-t.x,this.graph.offsetY=i-t.y,!0)}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(1)),o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var s=function(e){function t(e,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return r.mainController=e,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.default),r(t,[{key:"onSingleTap",value:function(e,t,n,r,i){return"node"==i?(this.graph.toggleAcceptState(r),!0):"edge"==i&&(this.mainController.openLabelEditor(r),!0)}},{key:"onDoubleTap",value:function(e,t,n,r,i){return null==r&&(this.mainController.createNewState(t-this.graph.centerX,n-this.graph.centerY),!0)}},{key:"onStartDragging",value:function(e,t,n,r,i){if("node"==i){var s=this.mainController.createNewTransition(r,null,o.STR_TRANSITION_PROXY_LABEL);return this.mainController.startMove(s,"endpoint"),!0}return!1}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var o=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=t,this.mouse=n}return r(e,[{key:"getNodesWithin",value:function(e,t,n,r,i){var o=!0,s=!1,a=void 0;try{for(var l,u=this.graph.nodes[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var h=l.value;h.x>=e&&h.x<n&&h.y>=t&&h.y<r&&i.push(h)}}catch(e){s=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(s)throw a}}}},{key:"getNodeAt",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var s,a=this.graph.nodes[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,u=e-l.x,h=t-l.y;if(u*u+h*h<i.NODE_RADIUS_SQU)return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return null}},{key:"getEdgeAt",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var s,a=this.graph.edges[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,u=e-l.x,h=t-l.y;if(u*u+h*h<i.EDGE_RADIUS_SQU)return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return null}},{key:"getEdgeByEndPointAt",value:function(e,t){var n=!0,r=!1,o=void 0;try{for(var s,a=this.graph.edges[Symbol.iterator]();!(n=(s=a.next()).done);n=!0){var l=s.value,u=l.getEndPoint(),h=e-u[0],c=t-u[1];if(h*h+c*c<i.ENDPOINT_RADIUS_SQU)return l}}catch(e){r=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return null}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));var o=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=document.getElementById("label-editor"),this.inputElement=document.getElementById("label-editor-input"),this.inputElement.addEventListener("keyup",function(e){e.keyCode==i.SUBMIT_KEY?t.close(!0):e.keyCode==i.CLEAR_KEY&&t.close(!1)}),this.inputElement.addEventListener("blur",function(e){t.close(!1)}),this.target=null}return r(e,[{key:"open",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.target!=e&&(this.target=e,this.element.style.left=this.target.x-this.element.offsetWidth/2+"px",this.element.style.top=this.target.y-this.element.offsetHeight/2+"px",this.inputElement.value=t||this.target.label,this.element.style.visibility="visible",this.inputElement.focus(),this.inputElement.select(),!0)}},{key:"close",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null!=this.target&&(e&&(this.target.label=this.inputElement.value),this.target=null,this.element.style.visibility="hidden",!0)}},{key:"isOpen",value:function(){return null!=this.target}},{key:"isEditting",value:function(e){return this.target==e}}]),e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=h(n(14)),o=h(n(13)),s=h(n(12)),a=h(n(11)),l=h(n(10)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function h(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graph=t,this.mouse=n,this.cursor=new o.default(t,n),this.labelEditor=new i.default,this.editCursor=new s.default(this,this.graph),this.moveCursor=new a.default(this,this.graph),this.selectCursor=new l.default(this,this.graph),this.moveMode=!1,this.tap={x:0,y:0},this.doubleTapTicks=0,this.isDown=!1,this.isDragging=!1,this.target=null,this.targetType=null,this.hoverTarget=null,this.hoverType=null,this.shouldDestroyPointlessEdges=u.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE,this.trashArea={x:u.TRASH_AREA_POSX,y:u.TRASH_AREA_POSY,width:u.TRASH_AREA_WIDTH,height:u.TRASH_AREA_HEIGHT}}return r(e,[{key:"load",value:function(){this.mouse.on("mousedown",this.onMouseDown.bind(this)),this.mouse.on("mouseup",this.onMouseUp.bind(this)),this.mouse.on("mouseexit",this.onMouseExit.bind(this)),this.mouse.on("mousemove",this.onMouseMove.bind(this))}},{key:"update",value:function(e){this.doubleTapTicks>0&&--this.doubleTapTicks;var t=this.mouse.x,n=this.mouse.y;this.hoverTarget=null,(this.hoverTarget=this.target)?(this.hoverTarget=this.target,this.hoverType=this.targetType):(this.hoverTarget=this.cursor.getNodeAt(t,n))?this.hoverType="node":(this.hoverTarget=this.cursor.getEdgeAt(t,n))?this.hoverType="edge":(this.hoverTarget=this.cursor.getEdgeByEndPointAt(t,n))&&(this.hoverType="endpoint")}},{key:"onMouseDown",value:function(e,t){this.moveMode=3==t;var n=this.tap.x=e.x,r=this.tap.y=e.y;this.isDown=!0,this.isDragging=!1,(this.target=this.cursor.getNodeAt(n,r))?this.targetType="node":(this.target=this.cursor.getEdgeAt(n,r))?this.targetType="edge":(this.target=this.cursor.getEdgeByEndPointAt(n,r))?this.targetType="endpoint":(this.target=null,this.targetType=null),this.selectCursor.hasSelection()&&("node"==this.targetType&&this.selectCursor.selectBox.targets.includes(this.target)||this.selectCursor.clearSelection())}},{key:"onMouseUp",value:function(e,t){var n=e.x,r=e.y;this.isDown=!1,this.isDragging?(this.doStopDragging(n,r),this.isDragging=!1):this.doubleTapTicks>0?this.doDoubleTap(n,r)||this.doSingleTap(n,r):(this.doSingleTap(n,r),this.doubleTapTicks=u.DOUBLE_TAP_TICKS),this.target=null,this.targetType=null}},{key:"onMouseMove",value:function(e,t,n){if(this.isDragging)this.doDragging(t,n);else if(this.isDown){var r=this.tap.x,i=this.tap.y,o=u.CURSOR_RADIUS_SQU;if(null!=this.target)if("node"==this.targetType)r=this.target.x,i=this.target.y,o=u.NODE_RADIUS_SQU;else if("edge"==this.targetType)r=this.target.x,i=this.target.y,o=u.EDGE_RADIUS_SQU;else if("endpoint"==this.targetType){var s=this.target.getEndPoint();r=s[0],i=s[1],o=u.ENDPOINT_RADIUS_SQU}(r-=t)*r+(i-=n)*i>=o&&(this.isDragging=!0,this.doStartDragging(t,n))}}},{key:"onMouseExit",value:function(e){var t=e.x,n=e.y;this.isDragging&&(this.doStopDragging(t,n),this.isDragging=!1),this.isDown&&(this.onMouseUp(e,0),this.isDown=!1)}},{key:"doSingleTap",value:function(e,t){return this.moveMode?this.moveCursor.onSingleTap(this.cursor,e,t,this.target,this.targetType):this.editCursor.onSingleTap(this.cursor,e,t,this.target,this.targetType)||this.selectCursor.onSingleTap(this.cursor,e,t,this.target,this.targetType)}},{key:"doDoubleTap",value:function(e,t){return this.moveMode?this.moveCursor.onDoubleTap(this.cursor,e,t,this.target,this.targetType):this.editCursor.onDoubleTap(this.cursor,e,t,this.target,this.targetType)||this.selectCursor.onDoubleTap(this.cursor,e,t,this.target,this.targetType)}},{key:"doStartDragging",value:function(e,t){return this.moveMode?this.moveCursor.onStartDragging(this.cursor,e,t,this.target,this.targetType):this.editCursor.onStartDragging(this.cursor,e,t,this.target,this.targetType)||this.selectCursor.onStartDragging(this.cursor,e,t,this.target,this.targetType)}},{key:"doDragging",value:function(e,t){return this.moveMode?this.moveCursor.onDragging(this.cursor,e,t,this.target,this.targetType):this.editCursor.onDragging(this.cursor,e,t,this.target,this.targetType)||this.selectCursor.onDragging(this.cursor,e,t,this.target,this.targetType)}},{key:"doStopDragging",value:function(e,t){return this.moveMode?this.moveCursor.onStopDragging(this.cursor,e,t,this.target,this.targetType):this.editCursor.onStopDragging(this.cursor,e,t,this.target,this.targetType)||this.selectCursor.onStopDragging(this.cursor,e,t,this.target,this.targetType)}},{key:"createNewState",value:function(e,t){var n=this.graph.createNewNode(e,t,u.STR_STATE_LABEL+this.graph.nodes.length);return n.x=e||Math.random()*u.SPAWN_RADIUS*2-u.SPAWN_RADIUS,n.y=t||Math.random()*u.SPAWN_RADIUS*2-u.SPAWN_RADIUS,n}},{key:"createNewTransition",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u.STR_TRANSITION_DEFAULT_LABEL;return this.graph.createNewEdge(e,t,n)}},{key:"openLabelEditor",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.labelEditor.open(e,t)}},{key:"startMove",value:function(e,t){if(this.moveMode=!0,this.target=e,this.targetType=t,"endpoint"==this.targetType){var n=this.target.quad;null!=n?(this.moveCursor.quadTarget.x=n.x,this.moveCursor.quadTarget.y=n.y):(this.moveCursor.quadTarget.x=0,this.moveCursor.quadTarget.y=0)}this.moveCursor.moveTarget(this.cursor,this.target,this.targetType,this.mouse.x,this.mouse.y)}},{key:"stopMove",value:function(){this.moveMode=!1}},{key:"isWithinTrash",value:function(e,t){var n=e-this.trashArea.x,r=t-this.trashArea.y;return n>0&&n<this.trashArea.width&&r>0&&r<this.trashArea.height}}]),e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=u(n(15)),o=u(n(9)),s=u(n(7)),a=(u(n(6)),u(n(5))),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(0));function u(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var c=function(){function e(t,n,r){var a=this;h(this,e),this.graph=n,this.mouse=r,this.viewport=t,this.cursors=new i.default(this.graph,this.mouse),this.buttons=new o.default(this.viewport,this.graph,this.cursors),this.parser=new s.default(this.graph),this.mode=new f(this);var u=document.getElementById("test_input"),c=document.getElementById("test_execute");c.addEventListener("click",function(e){alert(a.test((u.value||"")[Symbol.iterator]())?"SUCCESS!":"FAILED!"),u.select()}),u.addEventListener("keyup",function(e){e.keyCode==l.SUBMIT_KEY&&c.click()})}return r(e,[{key:"initialize",value:function(){this.cursors.load(),this.buttons.load(),this.mode.activate()}},{key:"test",value:function(e){var t=[],n=!0,r=!1,i=void 0;try{for(var o,s=this.graph.edges[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var l=o.value,u=!0,h=!1,c=void 0;try{for(var f,d=l.label.split(" ")[Symbol.iterator]();!(u=(f=d.next()).done);u=!0){var v=f.value,y=[];y.push(l.from.label),y.push(v),y.push(l.to?l.to.label:"undefined"),t.push(y)}}catch(e){h=!0,c=e}finally{try{!u&&d.return&&d.return()}finally{if(h)throw c}}}}catch(e){r=!0,i=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw i}}var p=this.graph.getInitialState().label,g=[],_=!0,E=!1,m=void 0;try{for(var S,b=this.graph.nodes[Symbol.iterator]();!(_=(S=b.next()).done);_=!0){var O=S.value;O.accept&&g.push(O.label)}}catch(e){E=!0,m=e}finally{try{!_&&b.return&&b.return()}finally{if(E)throw m}}return new a.default(t,p,g).solve(e)}},{key:"update",value:function(e){this.cursors.update(e),this.buttons.update(e)}}]),e}(),f=(function(){function e(t){h(this,e),this.controller=t,this._onEdgeCreate=this.onEdgeCreate.bind(this),this._onEdgeDestroy=this.onEdgeDestroy.bind(this)}r(e,[{key:"onEdgeCreate",value:function(e){}},{key:"onEdgeDestroy",value:function(e){}},{key:"activate",value:function(){this.controller.cursors.shouldDestroyPointlessEdges=!1,this.controller.graph.addListener("edgeCreate",this._onEdgeCreate),this.controller.graph.addListener("edgeDestroy",this._onEdgeDestroy)}},{key:"deactivate",value:function(){this.controller.cursors.shouldDestroyPointlessEdges=l.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE,this.controller.graph.removeListener("edgeCreate",this._onEdgeCreate),this.controller.graph.removeListener("edgeDestroy",this._onEdgeDestroy)}}])}(),function(){function e(t){h(this,e),this.controller=t}return r(e,[{key:"activate",value:function(){this.controller.cursors.shouldDestroyPointlessEdges=!0}},{key:"deactivate",value:function(){this.controller.cursors.shouldDestroyPointlessEdges=l.DEFAULT_SHOULD_DESTROY_POINTLESS_EDGE}}]),e}());t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(3));var o=!0,s=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=0,this.y=0,this.scrollX=0,this.scrollY=0,this._viewport=t,this._element=n,this._mouseup=this.onMouseUp.bind(this),this._mousedown=this.onMouseDown.bind(this),this._mouseclick=this.onMouseClick.bind(this),this._wheel=this.onMouseWheel.bind(this),this._mousemove=this.onMouseMove.bind(this),this._mouseenter=this.onMouseEnter.bind(this),this._mouseexit=this.onMouseExit.bind(this),this._touchstart=this.onTouchStart.bind(this),this._touchmove=this.onTouchMove.bind(this),this._touchstop=this.onTouchStop.bind(this),this._contextmenu=function(e){return!o||(e.preventDefault(),!1)},this._viewport.addEventListener("contextmenu",this._contextmenu,!1),this._viewport.addEventListener("mouseup",this._mouseup),this._viewport.addEventListener("mousedown",this._mousedown),this._viewport.addEventListener("click",this._mouseclick),this._viewport.addEventListener("wheel",this._wheel),this._element.addEventListener("mousemove",this._mousemove),this._viewport.addEventListener("mouseenter",this._mouseenter),this._viewport.addEventListener("mouseleave",this._mouseexit),this._viewport.addEventListener("touchstart",this._touchstart)}return r(e,[{key:"destroy",value:function(){this._viewport.removeEventListener("contextmenu",this._contextmenu),this._viewport.removeEventListener("mouseup",this._mouseup),this._viewport.removeEventListener("mousedown",this._mousedown),this._viewport.removeEventListener("click",this._mouseclick),this._viewport.removeEventListener("wheel",this._wheel),this._element.removeEventListener("mousemove",this._mousemove),this._viewport.removeEventListener("mouseenter",this._mouseenter),this._viewport.removeEventListener("mouseleave",this._mouseexit),this._viewport.removeEventListener("touchstart",this._touchstart)}},{key:"onMouseUp",value:function(e){this.onMouseMove(e),this.emit("mouseup",this,e.which)}},{key:"onMouseDown",value:function(e){this.onMouseMove(e),this.emit("mousedown",this,e.which)}},{key:"onMouseClick",value:function(e){this.onMouseMove(e),this.emit("mouseclick",this,e.which)}},{key:"onMouseWheel",value:function(e){this.scrollX+=e.deltaX,this.scrollY+=e.deltaY,this.emit("mousewheel",this,e.deltaX,e.deltaY)}},{key:"onMouseMove",value:function(e){var t=this._viewport.getBoundingClientRect();this.x=e.clientX-t.left,this.y=e.clientY-t.top,this.emit("mousemove",this,this.x,this.y)}},{key:"onMouseEnter",value:function(e){this.emit("mouseenter",this)}},{key:"onMouseExit",value:function(e){this.emit("mouseexit",this)}},{key:"onTouchStart",value:function(e){var t=e.touches[0].target;t.addEventListener("touchmove",this._touchmove),t.addEventListener("touchend",this._touchstop),t.addEventListener("touchcancel",this._touchstop)}},{key:"onTouchStop",value:function(e){var t=e.touches[0].target;t.removeEventListener("touchmove",this._touchmove),t.removeEventListener("touchend",this._touchstop),t.removeEventListener("touchcancel",this._touchstop)}},{key:"onTouchMove",value:function(e){this.onMouseMove(e.touches[0])}}]),e}();s.BUTTON_LEFT=0,s.BUTTON_MIDDLE=1,s.BUTTON_RIGHT=2,Object.assign(s.prototype,i.default),t.default=s},function(e,t,n){"use strict";var r=a(n(17)),i=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(n(0)),n(2)),o=a(n(16)),s=a(n(4));function a(e){return e&&e.__esModule?e:{default:e}}var l=document.getElementById("canvas"),u=new r.default(l,document),h=60;window.addEventListener("load",function(e){l.width=window.innerWidth,l.height=window.innerHeight,function(){var e=null,t=null;e=c.createNewNode(-64,0,"q0"),(t=c.createNewNode(64,0,"q1")).accept=!0,c.createNewEdge(e,t,"0 1"),f.initialize()}(),window.requestAnimationFrame(y)}),window.addEventListener("resize",function(e){l.width=window.innerWidth,l.height=window.innerHeight});var c=new i.NodalGraph(l),f=new o.default(l,c,u),d=new s.default(l,c,f);var v=0;function y(e){var t=(e-v)/h;c.update(t),f.update(t),d.render(),v=e,window.requestAnimationFrame(y)}}]);